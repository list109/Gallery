let zoomerImg,childrenImageArray=[];function makeImageZoomer(e,i){let o=document.createElement("div"),r=`
      <figcaption class="imageZoomerDesc" data-element="imageZoomerDesc">${i}</ figcaption>`;return o.innerHTML=`
      <figure class="imageZoomerBox imageZoomerBox__loading" data-element="imageZoomerBox">
        <i class="fa fa-spinner imageZoomerLoading animation" aria-hidden="true"></i>
        <div class="imageZoomerCover" data-element="imageZoomerCover">
        <i class="fa fa-times imageZoomerClose" aria-hidden="true" data-element="imageZoomerClose"></i>
          <img class="imageZoomerImg" data-element="imageZoomerImg" src="${e}">
          ${i?r:""}
        </div>
        
        <div class="imageZoomerTape" data-element="imageZoomerTape">
          <div class="imageZoomerArrow imageZoomerArrow__left" data-element="imageZoomerArrowLeft"></div>
          <div class="imageZoomerArrow imageZoomerArrow__right" data-element="imageZoomerArrowRight"></div>
          <ul class="imageZoomerList" data-element="imageZoomerList"></ul>
        </div>
      </figure>`,o}function getImageList(e){return e.map((e,i)=>{let o=document.createElement("div");o.innerHTML=`<li class='imageZoomerList__item ${getChosenClass(e.src)}'></li>`;let r=o.firstElementChild;return r.append(e.cloneNode()),r.classList.add(i>=5?"imageZoomerList__item_hidden":"imageZoomerList__item_visible"),r})}document.body.addEventListener("click",function({target:e}){if(!(zoomerImg=e.closest(".image-zoomer"))||void 0===(zoomerImg=zoomerImg.querySelector("img")))return;let i=reorderArray([...document.querySelectorAll(".image-zoomer img")]),{description:o,src:r}=getImageProperties(zoomerImg),t=makeImageZoomer(r,o),m=getSubElements(t),{imageZoomerBox:a,imageZoomerImg:s,imageZoomerDesc:n,imageZoomerClose:g,imageZoomerCover:l,imageZoomerArrowRight:c,imageZoomerArrowLeft:d,imageZoomerList:Z,imageZoomerTape:h}=m;function I({target:e}){let i=g.contains(e),o=l.contains(e),r=h.contains(e),t=e.closest(".imageZoomerList__item");switch(o||r||a.classList.contains("imageZoomerBox__loading"),!0){case i:destroyZoomer(a,I);break;case Boolean(t):let{firstElementChild:s}=t;changeListItem({nextZoomerImg:s,elements:m,target:e});break;case c===e:moveImage({direction:"right",elements:m,target:e});break;case d===e:moveImage({direction:"left",elements:m,target:e})}}Z.append(...getImageList(i)),childrenImageArray=Z.children,document.body.append(a),setTimeout(()=>{a.classList.add("imageZoomerBox__showing")},30),s.onload=()=>{a.classList.remove("imageZoomerBox__loading")},s.onerror=()=>{a.classList.add("imageZoomerBox__error"),a.classList.remove("imageZoomerBox__loading"),n.textContent="Извиняемся за неудобства, возникла ошибка при загрузки изображения."},document.addEventListener("click",I)});const getChosenClass=e=>zoomerImg.src===e?"imageZoomerList__item_chosen":"";function moveImage({direction:e,elements:i}){let o=[...childrenImageArray].findIndex(e=>e.classList.contains("imageZoomerList__item_chosen")),r=getIndex(o,e);zoomerImg=childrenImageArray[r].querySelector("img"),changeItemClass({index:r,elements:i,direction:e}),changeImage({elements:i})}function changeListItem({nextZoomerImg:e,elements:i}){if(zoomerImg&&e.src===zoomerImg.src)return;let o=[...childrenImageArray].indexOf(e.parentElement);zoomerImg=e,changeItemClass({index:o,elements:i}),changeImage({elements:i})}function changeItemClass({index:e,elements:i,direction:o}){let{imageZoomerList:r}=i,{length:t}=childrenImageArray,m=childrenImageArray[e],a=m.classList.contains("imageZoomerList__item_hidden");changeChoise({imageZoomerList:r,item:m}),a&&t>5&&changeVisibility({imageZoomerList:r,item:m,direction:o})}function changeChoise({imageZoomerList:e,item:i}){let o="imageZoomerList__item_chosen",r=e.querySelector("."+o);r.classList.remove(o),setTimeout(()=>{i.classList.add("imageZoomerList__item_chosen")})}function changeVisibility({imageZoomerList:e,item:i,direction:o}){let r;switch(o){case"right":r=e.querySelector(".imageZoomerList__item_visible"),e.append(r);break;case"left":let t=e.querySelectorAll(".imageZoomerList__item_visible");r=t[t.length-1],e.prepend(i)}r.className="imageZoomerList__item imageZoomerList__item_hidden",i.className="imageZoomerList__item imageZoomerList__item_visible"}function changeImage({elements:e}){let{imageZoomerImg:i,imageZoomerDesc:o,imageZoomerBox:r,imageZoomerList:t}=e,{src:m,description:a}=getImageProperties(zoomerImg);i.src=m,o.innerHTML=a,r.classList.add("imageZoomerBox__loading")}function getIndex(e,i){let{length:o}=childrenImageArray,r={right:e+1,left:e-1}[i];return r>=o?r=0:r<0&&(r=o-1),r}function getImageProperties(e){let i=e.src.split("/").slice(-1)[0];return{description:e.alt,name:i,src:`./images/${i}`}}function getSubElements(e){let i=[...e.querySelectorAll("[data-element]")];return i.reduce((e,i)=>(e[i.dataset.element]=i,e),{})}function destroyZoomer(e,i){document.removeEventListener("click",i),e.remove()}function reorderArray(e){let i=e.findIndex(e=>e.src===zoomerImg.src);if(i<5)return e;let o=e.slice(i-4),r=e.slice(0,i-4);return o.concat(r)}