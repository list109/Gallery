let zoomerImg,childrenImageArray=[];function makeImageZoomer(e,o){var i=document.createElement("div");return i.innerHTML=`
      <figure class="imageZoomerBox imageZoomerBox__loading" data-element="imageZoomerBox">
        <i class="fa fa-spinner imageZoomerLoading animation" aria-hidden="true"></i>
        <i class="fa fa-times imageZoomerClose" aria-hidden="true" data-element="imageZoomerClose"></i>
        <div class="imageZoomerCover" data-element="imageZoomerCover">
        
          <img class="imageZoomerImg" data-element="imageZoomerImg" src="${e}">
          ${o?`
      <figcaption class="imageZoomerDesc" data-element="imageZoomerDesc">${o}</ figcaption>`:""}
        </div>
        
        <div class="imageZoomerTape" data-element="imageZoomerTape">
          <div class="imageZoomerArrow imageZoomerArrow__left" data-element="imageZoomerArrowLeft"></div>
          <div class="imageZoomerArrow imageZoomerArrow__right" data-element="imageZoomerArrowRight"></div>
          <ul class="imageZoomerList" data-element="imageZoomerList"></ul>
        </div>
      </figure>`,i}function getImageList(e){return e.map((e,o)=>{var i=document.createElement("div"),i=(i.innerHTML=`<li class='imageZoomerList__item ${getChosenClass(e.src)}'></li>`,i.firstElementChild),e=(i.append(e.cloneNode()),5<=o?"imageZoomerList__item_hidden":"imageZoomerList__item_visible");return i.classList.add(e),i})}document.body.addEventListener("click",function({target:e}){if((zoomerImg=e.closest(".image-zoomer"))&&void 0!==(zoomerImg=zoomerImg.querySelector("img"))){var e=reorderArray([...document.querySelectorAll(".image-zoomer img")]),{description:o,src:i}=getImageProperties(zoomerImg);const g=getSubElements(makeImageZoomer(i,o)),{imageZoomerBox:c,imageZoomerImg:m,imageZoomerDesc:r,imageZoomerClose:l,imageZoomerCover:d,imageZoomerArrowRight:Z,imageZoomerArrowLeft:_,imageZoomerList:t,imageZoomerTape:h}=g;t.append(...getImageList(e)),childrenImageArray=t.children,document.body.append(c),setTimeout(()=>{c.classList.add("imageZoomerBox__showing")},30),m.onload=()=>{c.classList.remove("imageZoomerBox__loading")},m.onerror=()=>{c.classList.add("imageZoomerBox__error"),c.classList.remove("imageZoomerBox__loading"),r.textContent="Извиняемся за неудобства, возникла ошибка при загрузки изображения."},document.addEventListener("click",function e({target:o}){const i=l.contains(o);const m=d.contains(o);const r=h.contains(o);const t=m||r;const a=o.closest(".imageZoomerList__item");const s=!t&&!c.classList.contains("imageZoomerBox__loading");switch(!0){case i:destroyZoomer(c,e);break;case Boolean(a):const n=a["firstElementChild"];changeListItem({nextZoomerImg:n,elements:g,target:o});break;case Z===o:moveImage({direction:"right",elements:g,target:o});break;case _===o:moveImage({direction:"left",elements:g,target:o});break;case t:}})}});const getChosenClass=e=>zoomerImg.src===e?"imageZoomerList__item_chosen":"";function moveImage({direction:e,elements:o}){var i=getIndex([...childrenImageArray].findIndex(e=>e.classList.contains("imageZoomerList__item_chosen")),e);zoomerImg=childrenImageArray[i].querySelector("img"),changeItemClass({index:i,elements:o,direction:e}),changeImage({elements:o})}function changeListItem({nextZoomerImg:e,elements:o}){var i;zoomerImg&&e.src===zoomerImg.src||(i=[...childrenImageArray].indexOf(e.parentElement),zoomerImg=e,changeItemClass({index:i,elements:o}),changeImage({elements:o}))}function changeItemClass({index:e,elements:o,direction:i}){var o=o["imageZoomerList"],m=childrenImageArray["length"],e=childrenImageArray[e],r=e.classList.contains("imageZoomerList__item_hidden");changeChoise({imageZoomerList:o,item:e}),r&&5<m&&changeVisibility({imageZoomerList:o,item:e,direction:i})}function changeChoise({imageZoomerList:e,item:o}){var i="imageZoomerList__item_chosen";e.querySelector("."+i).classList.remove(i),setTimeout(()=>{o.classList.add("imageZoomerList__item_chosen")})}function changeVisibility({imageZoomerList:e,item:o,direction:i}){let m;switch(i){case"right":m=e.querySelector(".imageZoomerList__item_visible"),e.append(m);break;case"left":var r=e.querySelectorAll(".imageZoomerList__item_visible");m=r[r.length-1],e.prepend(o)}m.className="imageZoomerList__item imageZoomerList__item_hidden",o.className="imageZoomerList__item imageZoomerList__item_visible"}function changeImage({elements:e}){var{imageZoomerImg:e,imageZoomerDesc:o,imageZoomerBox:i}=e,{src:m,description:r}=getImageProperties(zoomerImg);e.src=m,o.innerHTML=r,i.classList.add("imageZoomerBox__loading")}function getIndex(e,o){var i=childrenImageArray["length"];let m={right:e+1,left:e-1}[o];return m>=i?m=0:m<0&&(m=i-1),m}function getImageProperties(e){var o=e.src.split("/").slice(-1)[0];return{description:e.alt,name:o,src:"./images/"+o}}function getSubElements(e){return[...e.querySelectorAll("[data-element]")].reduce((e,o)=>(e[o.dataset.element]=o,e),{})}function destroyZoomer(e,o){document.removeEventListener("click",o),e.remove()}function reorderArray(e){var o,i=e.findIndex(e=>e.src===zoomerImg.src);return i<5?e:(o=e.slice(i-4),e=e.slice(0,i-4),o.concat(e))}